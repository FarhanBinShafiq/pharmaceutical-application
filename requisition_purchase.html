<!DOCTYPE html>

<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
    <script src="js/bootstrap.bundle.min.js"></script>

    <title> BADAS </title>

</head>

<body>

    <!--sub menu-->

    <div class="container margin padding  w100">

        <div class="row">

            <div class="col-sm-2 pr0" style=" width: 1sww
            5%;">

                <div class="menu">

                    <div class="side-bar2">

                        <img class="logo" src="images/badas.png" id="sidebar-logo">
                        <h4 class="textstyle">BADAS</h4>

                        <div class="item top"><a href="#"><i class="fas fa-gauge"></i>Dashboard</a></div>


                        <!---     <div>
                            <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Purchase Requisition<i
                                class="fas fa-angle-right dropdown"></i></a>

                        <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Purchase Order<i
                                class="fas fa-angle-right dropdown"></i></a>


                        <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Purchase<i
                                class="fas fa-angle-right dropdown"></i></a>


                        <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Rejected Purchase Requisition<i
                                class="fas fa-angle-right dropdown"></i></a>

                        <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Rejected Purchase<i
                                class="fas fa-angle-right dropdown"></i></a>

                                <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Good Received<i
                                    class="fas fa-angle-right dropdown"></i></a>        

                        </div>  -->



                        <div class="item">
                            <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Purchase Requisition<i></i></a>
                        </div>




                        <div class="item">
                            <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Purchase Order<i></i></a>

                        </div>

                        <div class="item">
                            <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Purchase <i></i></a>

                        </div>


                        <div class="item">
                            <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Good Received<i></i></a>
                        </div>


                        <div class="item">
                            <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Rejected Purchase
                                Requisition<i></i></a>
                        </div>


                        <div class="item">
                            <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Rejected Purchase<i></i></a>
                        </div>


                        <div class="item">

                            <a class="sub-btn"><i class="fas fa-briefcase-medical"></i>Inventory<i
                                    class="fas fa-angle-right dropdown"></i></a>

                            <div class="sub-menu">

                                <div class="item"><a href="dashboard_sales.html"><i class=""></i>Sales</a></div>

                                <a class="sub-btn"><i class=""></i>Requisition<i
                                        class="fas fa-angle-right dropdown"></i></a>

                                <div class="sub-menu">
                                    <a href="requisition_purchase.html" class="sub-item purchasereq1"
                                        id="purchasereq1">Purchase Requisition</a>
                                    <a href="requisition_stocktransfer.html" class="sub-item stocktransferreq1"
                                        id="stocktransferreq1">Stock Transfer Requisition</a>
                                    <a href="requisition_purchase_rejected.html" class="sub-item stocktransferreq1"
                                        id="stocktransferreq1"> Reject Purchase Requisition</a>
                                </div>

                                <a class="sub-btn"><i class=""></i>Procurement<i
                                        class="fas fa-angle-right dropdown"></i></a>

                                <div class="sub-menu disnone">
                                    <a href="procurement_order.html" class="sub-item">Order</a>
                                    <a href="procurement_purchase.html" class="sub-item">Purchase</a>
                                    <a href="procurement_transfer.html" class="sub-item">Transfer</a>
                                    <a href="procurement_good_received.html" class="sub-item">Good Received</a>
                                    <a href="procurement_adjustment.html" class="sub-item">Adjustment</a>
                                </div>

                                <a class="sub-btn"><i class=""></i>Report<i class="fas fa-angle-right dropdown"></i></a>

                                <div class="sub-menu disnone">
                                    <a href="report_stockreport.html" class="sub-item">Stock Report</a>
                                    <a href="report_stockvaluesum.html" class="sub-item">Stock Value Summary</a>
                                    <a href="report_cashflowsum.html" class="sub-item">Cash Flow Summary</a>
                                    <a href="report_salessum.html" class="sub-item">Sales Summary Report</a>
                                    <a href="report_employeewisesales.html" class="sub-item">Employee Wise Sales</a>
                                    <a href="report_salesvatreport.html" class="sub-item">Sales Vat Report</a>
                                    <a href="#" class="sub-item">Purchase Order Report</a>
                                    <a href="#" class="sub-item">Purchase Summary Report</a>
                                    <a href="#" class="sub-item">Sale Purchase Stock Summary</a>
                                    <a href="#" class="sub-item">Product Purchase Summary</a>
                                    <a href="#" class="sub-item">Product IO</a>
                                    <a href="#" class="sub-item">Product Stock Summary</a>
                                    <a href="#" class="sub-item">Summary Report</a>
                                    <a href="#" class="sub-item">Product Short List</a>
                                </div>

                                <div class="item"><a href="#"><i class=""></i>Suppliers</a></div>

                            </div>
                        </div>

                        <div class="item">

                            <a class="sub-btn"><i class="fas fa-money-bill-1"></i>Accounts<i
                                    class="fas fa-angle-right dropdown"></i></a>

                            <div class="sub-menu disnone">
                                <a href="#" class="sub-item">Transactions</a>
                                <a href="#" class="sub-item">Income & Cost Statement</a>
                                <a href="#" class="sub-item">Customer</a>
                                <a href="#" class="sub-item">Accounts</a>
                                <a href="#" class="sub-item">Person Discount</a>
                                <a href="#" class="sub-item">Transaction Head</a>
                                <a href="#" class="sub-item">Merge Transaction Heads</a>
                                <a href="#" class="sub-item">Trial Balance</a>
                                <a href="#" class="sub-item">Cash Point Summary</a>
                            </div>
                        </div>

                        <div class="item">

                            <a class="sub-btn"><i class="fas fa-box-archive"></i>Products<i
                                    class="fas fa-angle-right dropdown"></i></a>

                            <div class="sub-menu disnone">
                                <a href="#" class="sub-item">Product Forms</a>
                                <a href="#" class="sub-item">Product Generics</a>
                                <a href="#" class="sub-item">Product Catagories</a>
                                <a href="#" class="sub-item">Product Groups</a>
                                <a href="#" class="sub-item">Manufacturing Company</a>
                                <a href="#" class="sub-item">Products</a>
                                <a href="#" class="sub-item">Possible Duplicate Products</a>
                                <a href="#" class="sub-item">Merge Products</a>
                                <a href="#" class="sub-item">Stores</a>
                                <a href="#" class="sub-item">Product Subgroups</a>
                                <a href="#" class="sub-item">Unit</a>
                                <a href="#" class="sub-item">Update Rack, Stock & Discount</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--search bar, topnav & profile avatar-->

            <div class="col-sm-10 px-4" style="background-color: #002E55;">





                <!--purchase requisition modal-->

                <div class="row " id='purchaseMenu' style="display:none">

                    <div class="col-md-6 px-2 w-50" style="padding: 3%;">

                        <div class="modal-header">
                            <div>
                                <h5 class="modal-title" id="exampleModalLabel">Add Purchase Requisition</h5>
                                <p>Product</p>
                            </div>
                            <button type="button" class="btn-close btn-close-white" id="Xclose" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>

                        <div class="modal-body">
                            <form action="">

                                <div class="container margin padding w100">

                                    <div class="row">

                                        <div class="col-sm-6">
                                            <h5 class="modal-text">REQUISITION DATE</h5>
                                            <input class="input-design4" type="date" id="requisition_Date" name="">
                                        </div>

                                        <div class="col-sm-6 px-2">
                                            <h5 class="modal-text">Store Name</h5>
                                            <select class="input-design4" id="purchaseReqFor" name="">

                                                </option>
                                                <option value="saab"></option>
                                                <option value="fiat">BADAS Pharmacy (Keraniganj)</option>
                                                <option value="fiat">BADAS Pharmacy (IGH savar)</option>
                                                <option value="fiat">BADAS Pharmacy (Jurain)</option>
                                                <option value="fiat">BADAS Pharmacy (Mohammadpur)</option>
                                            </select>
                                            <h5 class="morebtn">Edit</h5>
                                        </div>
                                    </div>

                                    <div class="row">



                                        <div class="col-sm-6">
                                            <h5 class="modal-text">Company Name</h5>
                                            <select class="input-design4" id="purchaseReqcustomer" name="">
                                                <option value="saab"></option>
                                                <option value="saab">Md Hridoy Talukder</option>
                                                <option value="fiat">Rural Healthcare Center Ukhia</option>
                                                <option value="fiat">Rinki Sarker</option>
                                                <option value="fiat">Shanto Hasan</option>
                                                <option value="fiat">BADAS Pharmacy (Mohammadpur)</option>
                                            </select>

                                        </div>

                                        <div class="col-sm-6 px-2">
                                            <h5 class="modal-text">DEPARTMENT</h5>
                                            <select class="input-design4" id="purchaseReqForDepartment" name="">

                                                </option>
                                                <option value="saab"></option>
                                                <option value="saab">BADAS Pharmacy (Birdem 2)</option>
                                                <option value="fiat">BADAS Pharmacy (Keraniganj)</option>
                                                <option value="fiat">BADAS Pharmacy (IGH savar)</option>
                                                <option value="fiat">BADAS Pharmacy (Jurain)</option>
                                                <option value="fiat">BADAS Pharmacy (Mohammadpur)</option>
                                            </select>
                                            <h5 class="morebtn">Edit</h5>
                                        </div>
                                    </div>

                                    <div class="row">

                                        <div class="col-sm-12">
                                            <h5 class="modal-text">ITEM</h5>
                                            <input class="input-design4 myInput " id="purchaseReqItem" name="">
                                            <h5 class="morebtn">Add</h5>
                                        </div>
                                    </div>

                                    <div class="row gx-2">

                                        <div class="col-sm-4">
                                            <h5 class="modal-text">UNIT</h5>
                                            <input class="input-design4 myInput " id="purchaseReqUnit" name="">
                                        </div>

                                        <div class="col-sm-4 px-2">
                                            <h5 class="modal-text">QTY</h5>
                                            <input class="input-design4 myInput " id="purchaseReqPcs" type="number"
                                                name="">
                                        </div>

                                        <div class="col-sm-2 px-2 py-3">
                                            <button type="button" class="btn btn-successs  addbtn" id="add">+</button>
                                        </div>
                                    </div>

                                    <br>

                                    <div class="row" id="remarkBox">

                                        <div class="col-sm-2">
                                            <h5 class="modal-text row-cols-md-auto">REMARKS</h5>
                                        </div>

                                        <div class="col-sm-8">
                                            <textarea id="myTextarea"
                                                style="background-color: #ffffff00; border-color: #ffffff;" rows="6"
                                                cols="45"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>


                        <div id="targetEvents">

                        </div>




                    </div>

                    <!--Summary-->

                    <div class="col-md-6 2" style="padding-top: 3%;">

                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Summary</h5>
                        </div>

                        <div class="modal-body">
                            <form action="">

                                <div class="row">

                                    <div class="col-sm-6">
                                        <h5 class="modal-text">DATE:</h5>
                                        <span id="requisitionDate"></span>
                                    </div>

                                    <div class="col-sm-6">
                                        <h5 class="modal-text" id="reqClient">STORE NAME :</h5>
                                        <span id="requisitionFor"></span>
                                    </div>
                                </div>

                                <br />


                                <div class="row ">

                                    <div class="col-sm-6">
                                        <h5 class="modal-text">Company Name :</h5>
                                        <span id="requisitionReceiver"></span>
                                    </div>

                                    <div class="col-sm-6">
                                        <h5 class="modal-text" id="reqClient">DEPARTMENT :</h5>
                                        <span id="requisitionDepartment"></span>
                                    </div>
                                </div>


                                <table class="table">
                                    <thead class="tbodyresult3">
                                        <tr>
                                            <th scope="col">SL</th>
                                            <th scope="col">ITEM</th>
                                            <th scope="col">QTY</th>
                                            <th scope="col">ACTION</th>
                                        </tr>
                                    </thead>


                                    <tbody id="addTable">
                                    </tbody>
                                </table>


                                <div class="row " id="rBox">


                                    <div class="col-sm-6">
                                        <h5 class="modal-text" id="reqClient">Remark:</h5>



                                        <div class="col-sm-10">
                                            <textarea id="targetElement"
                                                style="background-color: #ffffff00; border: none;" rows="6"
                                                cols="60"></textarea>
                                        </div>
                                    </div>
                                </div>



                            </form>
                        </div>
                    </div>
                </div>

                <br>

                <!--purchase requisition tab-->

                <div class="purchasereq-tab" style="background-color: #003E6C;"> <br>

                    <div class="sc">
                        <h6 class="topnav2 ib">Purchase Requisition</h6>

                        <div class="buttonbox">
                            <button class="fa fa-search buttons" href="#Search"></button>
                            <button class="fa-solid fa-filter buttons" href="#Filter"></button>
                            <button class="fa-solid fa-print buttons" type="button" data-bs-toggle="modal"
                                data-bs-target="#exampleModal3"></button>
                            <button class="fa-solid fa-download buttons" href="#Download"></button>


                            <button class="fa-sharp fa-solid fa-plus buttons  " type="button" id="tab"></button>
                        </div>
                    </div>

                    <table class="table mx-auto px-2">
                        <thead style="background-color: #003E6C; font-size: small;">
                            <tr>

                                <th scope="col">ID</th>
                                <th scope="col">DATE</th>
                                <th scope="col">STORE NAME</th>
                                <th scope="col">Company Name</th>
                                <th scope="col">DEPARTMENT</th>

                                <th scope="col">STATUS</th>
                            </tr>
                        </thead>

                        <tbody style="background-color: #154883" id="purchaseTable">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <!--toggle function on sub menus-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="js/main.js"></script>





    <script>
        //purchase requisition form-->


        $(document).ready(() => {


            $('.sub-btn').click(function () {
                $(this).next('.sub-menu').slideToggle();
                $(this).find('.dropdown').toggleClass('rotate');
            });

            //


            //add Purchase Page open and hide


            $(document).on('click', '#tab', () => {

                var pMenu = $('#purchaseMenu')
                pMenu.toggle(500)
            })




            $(document).on('click', '#Xclose', () => {

                var pMenu = $('#purchaseMenu')
                pMenu.hide(500)
            })

            //Add Requasition 

            //Date

            $(document).on('change', '#requisition_Date', () => {
                const reqDate = $("#requisition_Date").val()

                $('#requisitionDate').text(reqDate)

            })


            //Store

            $(document).on('change', '#purchaseReqFor', () => {
                const requisitionForPurchase = $("#purchaseReqFor option:selected").text()

                $('#requisitionFor').text(requisitionForPurchase)

            })


            //Company 

            $(document).on('change', '#purchaseReqcustomer', () => {
                const reqCustomerValue = $("#purchaseReqcustomer option:selected").text()

                $('#requisitionReceiver').text(reqCustomerValue)

            })


            // Department


            $(document).on('change', '#purchaseReqForDepartment', () => {
                const reqToDepartment = $("#purchaseReqForDepartment option:selected").text()

                $('#requisitionDepartment').text(reqToDepartment)


            })






            //Add Purchase Item on Table

            var row = 0;
            var itemList = [];



            $(document).on('click', '#add', (event) => {
                event.preventDefault();

                //Item
                const rePurchaseReqItem = $("#purchaseReqItem").val()
                //Unit
                const reqPurchaseUnit = $("#purchaseReqUnit").val()
                //Quantity
                const purchaseQty = $("#purchaseReqPcs").val()




                if (rePurchaseReqItem == '') {

                    alert('Fill up the Item Field')


                } else {
                    if (reqPurchaseUnit == '') {
                        alert('Fill up the Unit field')

                    } else {
                        if (purchaseQty == '') {

                            alert('Fill up the Quantity Field')
                        } else {
                            if (rePurchaseReqItem !== '' && purchaseQty !== '' && reqPurchaseUnit !== '') {

                                if (itemList.indexOf(rePurchaseReqItem) === -1) {
                                    itemList.push(...itemList, rePurchaseReqItem)
                                    var detail = `
                                             <tr class="ccc">+
                                             <th scope="row">${row + 1}</th>'+
                                             <td id='item'>${rePurchaseReqItem}</td>+
                                             <td id='quantity'>${purchaseQty} ${reqPurchaseUnit}</td>+
                                             <td>
                                            <button type="button" id="openBtn"  class="itemRemove btn btn-danger btn-sm creditdelete">
                                              Delete
                                            </button>
 
                                             </td>+
                                            </tr>`;



                                    $('#addTable').append(detail);


                                    //Prevent the reload after Alert function

                                    // Clear the input field
                                    //Item

                                    $("#purchaseReqItem").val(null);
                                    $("#purchaseReqUnit").val(null);
                                    $("#purchaseReqPcs").val(null);
                                    row++;
                                }
                                else {
                                    alert('Already Exists')
                                }
                            }
                        }
                    }
                }




            })

            ///Items Delete

            $(document).on('click', '.itemRemove', function () {
                var removedItem = $(this).closest('tr').find('td#item').text();
                itemList = itemList.filter(item => item !== removedItem);
                $(this).closest('tr').remove();
            });


            ///Remarks
            $('#rBox').hide()

            $(document).ready(function () {

                $("#myTextarea").on("keyup input", function () {
                    $('#rBox').show()
                    var textareaValue = $(this).val();
                    $("#targetElement").text(textareaValue);
                });
            });





            //Submit and hold button Appear

            $(document).one('click', '#add', () => {
                $('#targetEvents').append(
                    ` <div class="modal-footer" id="buttonShow">
        <button type="button" id="holdEvent" class="btn  btn-secondary" data-bs-dismiss="modal">On Hold</button>
        <button type="button" id="submitEvent" class="btn  btn-primary" >Submit</button>
    </div>`
                )
            })




            //Add on Purchase Requisition  ------> Submit

            $(document).on('click', '#submitEvent', (e) => {


                e.preventDefault()

                //date
                const reqDate = $("#requisition_Date").val()

                $('#requisitionDate').text(reqDate)

                //Store
                const requisitionForPurchase = $("#purchaseReqFor option:selected").text()
                $('#store').text(requisitionForPurchase)


                //Receiver
                const reqCustomerValue = $("#purchaseReqcustomer option:selected").text()
                $('#receiver').text(reqCustomerValue)


                // Department
                const reqToDepartment = $("#purchaseReqForDepartment option:selected").text()
                $('#department').text(reqToDepartment)




                var purchaseReqTable = `
                        <tr> +
        
                         <td>1112818</td> +
                         <td id='requisitionDate'>${reqDate}</td> +
                         <td id='store'>${requisitionForPurchase}</td> +
                         <td id='receiver'>${reqCustomerValue}</td> +
                         <td id='department'>${reqToDepartment}</td> +

                        <td>
                        <button type="button" id="detailEvent" class="btn btn-info" data-bs-dismiss="modal">Details</button>
                           
                        </td> +
                        </tr>`
                $('#purchaseTable').append(purchaseReqTable);


                ///Clear the Summay page
                $("#purchaseReqItem").val(null);
                $("#purchaseReqUnit").val(null);
                $("#purchaseReqPcs").val(null);
                $("#addTable").empty()
                $("#requisitionDepartment").text(null)
                $('#requisitionReceiver').text(null)
                $('#requisitionDate').text(null)
                $('#requisitionFor').text(null)
                $("#requisition_Date").val(null)
                $("#purchaseReqFor option:selected").text(null)
                $("#purchaseReqcustomer option:selected").text(null)
                $("#purchaseReqForDepartment option:selected").text(null)
                $('#rBox').text(null)
                $('#myTextarea').val(null)

                //Add Purchase Table Hide
                $('#purchaseMenu').hide(1000)

                //Refresh
                //location.reload();


            })

            ///Details Page
            $(document).on('click', '#detailEvent', () => {

                window.location.href = './DetailPage.html'

            })



            ///Hold Event

            $(document).on('click', '#holdEvent', (event) => {
                event.preventDefault();
                alert('Hold Options')

                //date
                const reqDate = $("#requisition_Date").val()

                $('#requisitionDate').text(reqDate)

                //Store
                const requisitionForPurchase = $("#purchaseReqFor option:selected").text()
                $('#store').text(requisitionForPurchase)


                //Receiver
                const reqCustomerValue = $("#purchaseReqcustomer option:selected").text()
                $('#receiver').text(reqCustomerValue)


                // Department
                const reqToDepartment = $("#purchaseReqForDepartment option:selected").text()
                $('#department').text(reqToDepartment)


                var purchaseReqTable = `
                            <tr> +
            
                             <td>1112818</td> +
                             <td id='requisitionDate'>${reqDate}</td> +
                             <td id='store'>${requisitionForPurchase}</td> +
                             <td id='receiver'>${reqCustomerValue}</td> +
                             <td id='department'>${reqToDepartment}</td> +
    
                            <td>
                            <button type="button" id="editEvent" class="btn btn-info" data-bs-dismiss="modal">Edit</button>
                               
                            </td> +
                            </tr>`
                $('#purchaseTable').append(purchaseReqTable);


                ///Clear the Summay page
                // $("#addTable").empty()
                // $("#requisitionDepartment").text(null)
                // $('#requisitionReceiver').text(null)
                // $('#requisitionDate').text(null)
                // $('#requisitionFor').text(null)
                $("#requisition_Date").val(null)
                $("#purchaseReqFor option:selected").text(null)
                $("#purchaseReqcustomer option:selected").text(null)
                $("#purchaseReqForDepartment option:selected").text(null)

                $('#myTextarea').val(null)

                //Add Purchase Table Hide
                $('#purchaseMenu').hide(1000)





            })


            $(document).on('click', '#editEvent', () => {
                $('#purchaseMenu').show(1000)
            })



            // Disable the button initially        

            $('#add').prop('disabled', true);

            $(document).on('input', '#purchaseReqItem, #purchaseReqUnit, #purchaseReqPcs', () => {
                const rePurchaseReqItem = $("#purchaseReqItem").val();
                const reqPurchaseUnit = $("#purchaseReqUnit").val();
                const purchaseQty = $("#purchaseReqPcs").val();

                if (rePurchaseReqItem !== '' && reqPurchaseUnit !== '' && purchaseQty !== '') {
                    $('#add').prop('disabled', false); // Enable the button
                } else {
                    $('#add').prop('disabled', true); // Disable the button
                }
            });








        });

    </script>


</body>

</html>